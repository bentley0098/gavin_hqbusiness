(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{291:function(e,t,a){},315:function(e,t,a){},376:function(e,t,a){},380:function(e,t){},412:function(e,t,a){},451:function(e,t,a){},718:function(e,t){},719:function(e,t){},763:function(e,t,a){},894:function(e,t,a){},895:function(e,t,a){},896:function(e,t,a){},897:function(e,t,a){},898:function(e,t,a){},900:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(49),s=a.n(c),i=(a(451),a(58)),o=a(54),l=(a(315),a(5)),u=a(61),j=a.n(u),d=(a(126),a(127),a(111),a(130)),b=(a(376),a(222)),h=a.n(b),m=a(122),O=a(414),x=a(2),p=function(){return fetch("/getErrorCount/0").then((function(e){return e.json()}))},f=r.a.memo((function(e){var t=Object(n.useState)(0),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),f=u[0],C=u[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),y=v[0],S=v[1],N=Object(n.useState)([]),D=Object(l.a)(N,2),k=D[0],w=D[1],T=function(){fetch("/returnAlerts").then((function(e){return e.json()})).then((function(e){M(Y+1),w(e),C(!0)}))},I=Object(n.useState)(0),U=Object(l.a)(I,2),Y=U[0],M=U[1],J=Object(n.useState)(),P=Object(l.a)(J,2),_=P[0],R=P[1];Object(n.useEffect)((function(){0===Y?(p().then((function(e){R(e[0][""])})),M(Y+1)):setTimeout((function(){M(Y+1),p().then((function(e){e[0][""]>_&&void 0!==_&&(R(e[0][""]),c(r+1))}))}),5e3)}),[Y,r,_]);var F=Object(o.f)(),L=Object(n.useCallback)((function(e){"/Errors"==window.location.pathname?window.location.reload(!1):F.push("/Errors"),localStorage.setItem("CustomerErrorCheck",JSON.stringify(e.data)),C(!1)}),[F]),E=Object(n.useCallback)((function(e){var t=e.onDoubleClick;e.onDoubleClick=function(a){L(e),t&&t(a)}}),[L]),A=Object(n.useCallback)((function(e,t){}),[]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(i.b,{class:"nav-link",onClick:function(){T(),c(0)},children:[Object(x.jsx)(h.a,{count:r,effect:b.Effect.SCALE}),Object(x.jsx)(d.b,{})]}),Object(x.jsx)("div",{className:"alerts-toast",children:Object(x.jsxs)(m.a,{onClose:function(){return C(!1)},show:f,style:{width:"330px",height:"330px"},children:[Object(x.jsx)(m.a.Header,{children:Object(x.jsx)("strong",{className:"me-auto",children:"Alerts"})}),Object(x.jsx)(m.a.Body,{children:Object(x.jsx)(j.a,{idProperty:"id",columns:[{name:"Customer_Name",header:"Company",defaultFlex:2,type:"string"},{name:"ErrorCount",header:"Errors",defaultFlex:1,type:"number"}],dataSource:k,style:{minHeight:250,margin:5},theme:"default-dark",onRenderRow:E,onRowClick:A})})]})}),y&&Object(x.jsx)("div",{className:"alert-notification",children:Object(x.jsx)(O.a,{onClose:function(){return S(!1)},variant:"danger",dismissible:!0,closeLabel:"Dismiss",children:"There is a new error!"},1)})]})}));var C=Object(o.g)((function(e){var t=sessionStorage.getItem("token"),a=JSON.parse(t).username;return Object(x.jsx)("div",{className:"navigation",children:Object(x.jsx)("nav",{class:"navbar navbar-expand navbar-dark grid-bg-colour",children:Object(x.jsxs)("div",{class:"container",children:[Object(x.jsxs)(i.b,{class:"navbar-brand",to:"/",children:[a,"'s HQ BUSINESS"]}),Object(x.jsx)("div",{children:Object(x.jsxs)("ul",{class:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{class:"nav-item  ".concat("/"===e.location.pathname?"active":""),children:Object(x.jsxs)(i.b,{class:"nav-link",to:"/",children:["Tasks",Object(x.jsx)("span",{class:"sr-only",children:"(current)"})]})}),Object(x.jsx)("li",{class:"nav-item  ".concat("/Report1"===e.location.pathname?"active":""),children:Object(x.jsx)(i.b,{class:"nav-link",to:"/Report1",children:"Reports"})}),Object(x.jsx)("li",{class:"nav-item  ".concat("/Support"===e.location.pathname?"active":""),children:Object(x.jsx)(i.b,{class:"nav-link",to:"/Support",children:"Support"})}),Object(x.jsx)("li",{class:"nav-item  ".concat("/Products"===e.location.pathname?"active":""),children:Object(x.jsx)(i.b,{class:"nav-link",to:"/Products",children:"Products"})}),Object(x.jsx)("li",{class:"nav-item  ".concat("/Customers"===e.location.pathname?"active":""),children:Object(x.jsx)(i.b,{class:"nav-link",to:"/Customers",children:"Customers"})}),Object(x.jsx)("li",{children:Object(x.jsx)(f,{})}),Object(x.jsx)("li",{children:Object(x.jsx)("div",{className:"spacer"})}),Object(x.jsx)("li",{class:"nav-item  ".concat("/Login"===e.location.pathname?"active":""),children:Object(x.jsx)(i.b,{class:"nav-link",to:"/",onClick:function(){sessionStorage.removeItem("token"),window.location.reload(!1)},children:"Sign Out"})})]})})]})})})}));var g=function(){return Object(x.jsx)("div",{className:"footer",children:Object(x.jsx)("footer",{class:"py-3 grid-bg-colour fixed-bottom",children:Object(x.jsx)("div",{class:"container",children:Object(x.jsx)("p",{class:"m-0 text-center text-white",children:"Copyright \xa9 HQ Software 2021, v1.85"})})})})};var v=a(123),y=a(45),S=a(29),N=(a(128),a(30)),D=a(4),k=a(438),w=a(260),T=a(53),I=a(26),U=a(38),Y=a(37),M=a(70),J=a.n(M),P=(a(211),a(31)),_=a.n(P),R=a(39),F=a.n(R),L=a(66);function E(e){return fetch("/taskHistory/"+e).then((function(e){return e.json()}))}function A(e,t,a,n){var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Notes:e,Task:t,userid:a,minutes:n})};return fetch("/addHistory/",r)}function H(e,t,a,n,r){t||(t=e.Company_Name,a=e.Account),n||(n=e.Department),r||(r=e.ActionByUserID);var c={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({Task:e.Issue_No,Details:e.Details,Notes:e.Notes,Area:e.Reference2,Application:e.Reference,Contact:e.Reference3,Estimate:e.Estimate,Priority:e.Priority,Invoice:e.Invoice,DueDate:e.DueDate,Requested:e.Requested,Company_Name:t,Account:a,Department:n,User:r})};return fetch("/updateTask/",c)}function B(e,t,a,n,r,c,s,i,o,l,u,j,d,b,h,m,O){var x={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Details:n,Task:e,CustomerName:t,CustomerCode:a,Priority:r,DueDate:c,ReqDate:s,Department:i,User:o,Reference1:u,Contact:j,Reference2:d,Notes:b,Estimate:h,Invoice:m,UserID:l,Urgent:O})};return fetch("/addNewTask/",x)}function W(){return z.apply(this,arguments)}function z(){return(z=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/newTaskId");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return K.apply(this,arguments)}function K(){return(K=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnCustomers");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return Q.apply(this,arguments)}function Q(){return(Q=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnDepartments");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return X.apply(this,arguments)}function X(){return(X=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnUsers");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnSelectedTask/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnReasons");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskID:e,userid:t})};return fetch("/openHistory",a)}function te(e,t){var a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskID:e,input:t})};return fetch("/makeUrgent",a)}function ae(e,t){var a=JSON.stringify(e),n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemID:a,input:t})};return fetch("/closeItem",n)}var ne=a(188),re=(a(713),a.p+"static/media/PDFLogo.d3482e1c.png"),ce=a(305),se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HQB_TASKS.xlsx",a=document.createElement("a"),n=URL.createObjectURL(e);a.setAttribute("href",n),a.setAttribute("download",t),a.style.position="absolute",a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)};var ie=a(242),oe=a(154),le=a(117),ue={SupportCode:0,Customer_Code:340,CustomerName:"HQ Software",CustomerCode:340};var je=r.a.memo((function(e){var t={UserId:e.filterUser.UserId,Username:e.filterUser.Username},a=e.filterDepartment,r=e.filterCustomer,c=sessionStorage.getItem("token"),s=JSON.parse(c),i=s.username,o=s.userId,u=Object(n.useState)([]),j=Object(l.a)(u,2),d=j[0],b=j[1],h=Object(n.useState)([]),m=Object(l.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)([]),C=Object(l.a)(f,2),g=C[0],y=C[1];Object(n.useEffect)((function(){var e=!0;return G().then((function(t){e&&p(t)})),q().then((function(t){e&&b(t)})),V().then((function(t){e&&y(t)})),function(){return e=!1}}),[]);var k=Object(n.useState)(!1),w=Object(l.a)(k,2),M=w[0],P=w[1],R=Object(n.useState)(!1),F=Object(l.a)(R,2),L=F[0],E=F[1],A=new Date;A.setDate(A.getDate()+14);var H=Object(n.useState)(A),z=Object(l.a)(H,2),K=z[0],Q=z[1],X=Object(n.useState)(new Date),Z=Object(l.a)(X,2),$=Z[0],te=Z[1],ae=Object(n.useState)(""),ne=Object(l.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)(),je=Object(l.a)(se,2),de=je[0],be=je[1],he=Object(n.useState)({}),me=Object(l.a)(he,2),Oe=me[0],xe=me[1],pe=Object(n.useState)({}),fe=Object(l.a)(pe,2),Ce=fe[0],ge=fe[1],ve=Object(n.useState)([]),ye=Object(l.a)(ve,2),Se=ye[0],Ne=ye[1],De=Object(n.useState)(""),ke=Object(l.a)(De,2),we=ke[0],Te=ke[1],Ie=Object(n.useState)(""),Ue=Object(l.a)(Ie,2),Ye=Ue[0],Me=Ue[1],Je=Object(n.useState)(""),Pe=Object(l.a)(Je,2),_e=Pe[0],Re=Pe[1],Fe=Object(n.useState)(""),Le=Object(l.a)(Fe,2),Ee=Le[0],Ae=Le[1],He=Object(n.useState)(""),Be=Object(l.a)(He,2),We=Be[0],ze=Be[1],Ge=Object(n.useState)(""),Ke=Object(l.a)(Ge,2),qe=Ke[0],Qe=Ke[1],Ve=Object(n.useState)(2),Xe=Object(l.a)(Ve,2),Ze=Xe[0],$e=Xe[1],et=Object(n.useState)(null),tt=Object(l.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)(""),ct=Object(l.a)(rt,2),st=ct[0],it=ct[1],ot=function(){P(!1),setTimeout((function(){var e=new Date;e.setDate(e.getDate()+14),ce(""),$e(2),Q(e),te(new Date),Te(""),Me(""),Re(""),Ae(""),Qe(""),ze(""),ge({}),xe({}),nt(null),ht([{item:""}])}),200)},lt=function(){var t=_()(K).format("YYYY-MM-DD hh:mm:ss"),n=_()($).format("YYYY-MM-DD hh:mm:ss"),c={},s={};s=void 0===Oe.CustomerCode?r:Oe,c=void 0===Ce.Code?a:Ce,W().then((function(a){be(a[0][""]),0===s.CustomerCode?alert("Please Select a Customer"):0===c.Code?alert("Please Select a Department"):0===Se.UserId?alert("Please Select a User"):(B(a[0][""],s.CustomerName,s.CustomerCode,re,Ze,t,n,c.Code,i,Se.UserId,we,Ye,_e,Ee,qe,We,at),ee(a[0][""],o),ut(a[0][""]),""!==bt[0].item&&bt.forEach((function(e){!function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Details:t,taskID:e})};fetch("/addItem/",a)}(a[0][""],e.item)})),ot()),setTimeout((function(){e.onClick()}),500)}))},ut=function(e){var t=_()(K).format("DD/MM/YYYY");it("mailto:?subject=Task:%20".concat(e,"&body=Issue:%20").concat(de,"%0D%0ADetails:%20").concat(re,"%0D%0APriority:%20").concat(Ze,"%0D%0ABy:%20").concat(Se.Username,"%0D%0ADue:%20").concat(t)),function(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);var t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((function(e,a){document.execCommand("copy")?e():a(),t.remove()}))}("Task: ".concat(e,"\r\nDetails: ").concat(re,"\r\nPriority: ").concat(Ze,"\r\nBy: ").concat(Se.Username,"\r\nDue: ").concat(t)).catch((function(){return console.log("error")})),E(!0)};var jt=Object(n.useState)([{item:""}]),dt=Object(l.a)(jt,2),bt=dt[0],ht=dt[1],mt=function(){ht([].concat(Object(v.a)(bt),[{item:""}]))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-newtask",children:"New Task"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){P(!0),Ne(t),setTimeout((function(){document.getElementById("inline-newTask-radio-".concat(Ze)).click()}),10),Me(i)},className:"button-to-the-left",children:Object(x.jsx)(oe.a,{})})},"NewTask"),Object(x.jsxs)(N.a,{show:M,onHide:ot,size:"lg",children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsx)(N.a.Title,{children:"Create New Task"})}),Object(x.jsxs)(N.a.Body,{children:[Object(x.jsxs)(D.a,{children:[Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"newTask.CustomerSelect",children:[Object(x.jsx)("h7",{children:"Customer:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:O.CustomerName,onChange:function(e){return xe(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(r),children:r.CustomerName}),Object(x.jsx)("option",{value:JSON.stringify(ue),children:ue.CustomerName}),O.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"newTask.DepartmentSelect",children:[Object(x.jsx)("h7",{children:"Department:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:d.Department,onChange:function(e){return ge(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(a),children:a.Department}),d.map((function(e,t){return e.Department!==a.Department?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Department},t):null}))]})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"newTask.UserSelect",children:[Object(x.jsx)("h7",{children:"For:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:g.Username,onChange:function(e){return Ne(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(t),children:t.Username}),g.map((function(e,a){return e.Username!==t.Username?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Username},a):null}))]})]})})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Details",children:[Object(x.jsx)("h7",{children:"Details:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add Details...",value:re,onChange:function(e){return ce(e.target.value)},type:"text",size:"sm"})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Notes",children:[Object(x.jsx)("h7",{children:"Notes:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add Notes...",value:Ee,onChange:function(e){return Ae(e.target.value)},type:"text",size:"sm"})]})})]}),Object(x.jsxs)(D.a.Group,{as:T.a,className:"mb-3",controlId:"newTask.Dates",style:{marginTop:5},children:[Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)(D.a.Label,{children:"Due:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(J.a,{selected:K,onChange:function(e){return Q(e)},dateFormat:"dd/MM/yyyy",calendarStartDay:1})}),Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)(D.a.Label,{children:"Requested:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(J.a,{selected:$,onChange:function(e){return te(e)},dateFormat:"dd/MM/yyyy",calendarStartDay:1})})]}),Object(x.jsxs)(D.a.Group,{as:T.a,className:"mb-3",controlId:"newTask.Reference1-2",style:{marginTop:5},children:[Object(x.jsx)(I.a,{xs:1,children:Object(x.jsx)(D.a.Label,{children:"P:"})}),Object(x.jsxs)(I.a,{xs:3,children:[Object(x.jsx)(D.a.Check,{size:"sm",inline:!0,label:"1",type:"radio",name:"group1",id:"inline-newTask-radio-1",onChange:function(e){return $e(1)}}),Object(x.jsx)(D.a.Check,{size:"sm",inline:!0,label:"2",type:"radio",name:"group1",id:"inline-newTask-radio-2",onChange:function(e){return $e(2)}}),Object(x.jsx)(D.a.Check,{size:"sm",inline:!0,label:"3",type:"radio",name:"group1",id:"inline-newTask-radio-3",onChange:function(e){return $e(3)}})]}),Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)("h7",{children:"Reference 1:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{style:{display:"inline"},size:"sm",as:"textarea",rows:1,type:"text",value:we,onChange:function(e){return Te(e.target.value)}})}),Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)(D.a.Label,{children:"Reference 2:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:_e,onChange:function(e){return Re(e.target.value)},size:"sm"})})]}),Object(x.jsxs)(D.a.Group,{as:T.a,className:"mb-3",controlId:"newTask.Contact",style:{marginTop:5},children:[Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)(D.a.Label,{children:"Requester:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Ye,onChange:function(e){return Me(e.target.value)},size:"sm"})}),Object(x.jsx)(I.a,{xs:1,children:Object(x.jsx)(D.a.Label,{children:"Estimate:"})}),Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:qe,onChange:function(e){return Qe(e.target.value)},size:"sm"})}),Object(x.jsx)(I.a,{xs:1,children:Object(x.jsx)(D.a.Label,{children:"Invoice:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:We,onChange:function(e){return ze(e.target.value)},size:"sm"})})]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(D.a.Label,{children:"Items:"}),bt.map((function(e,t){return Object(x.jsx)("div",{className:"box",children:Object(x.jsxs)(D.a.Group,{as:T.a,controlId:"newItems",style:{marginTop:5},children:[Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{size:"sm",as:"textarea",rows:1,type:"text",name:"item",value:e.item,onChange:function(e){return function(e,t){var a=e.target,n=a.name,r=a.value,c=Object(v.a)(bt);c[t][n]=r,ht(c)}(e,t)}})}),Object(x.jsx)(I.a,{xs:1,children:1!==bt.length&&Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-removeitem",children:"Remove Item"}),children:Object(x.jsx)(S.a,{size:"sm",className:"mr10",variant:"secondary",onClick:function(){return function(e){var t=Object(v.a)(bt);t.splice(e,1),ht(t)}(t)},children:Object(x.jsx)(le.a,{})})},"RemoveItem")}),Object(x.jsx)(I.a,{xs:1,children:bt.length-1===t&&Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-additem",children:"Add Item"}),children:Object(x.jsx)(S.a,{size:"sm",variant:"secondary",onClick:mt,children:Object(x.jsx)(le.b,{})})},"AddItem")})]})})}))]})]}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Make Urgent",style:{margin:5,right:450},onChange:function(e){nt(null===at?1:null)}}),Object(x.jsx)(S.a,{variant:"secondary",onClick:ot,children:"Close"}),Object(x.jsx)(S.a,{variant:"primary",onClick:function(){lt()},children:"Create Task"})]})]}),Object(x.jsxs)(N.a,{size:"sm",show:L,onHide:function(){return E(!1)},"aria-labelledby":"success-alert",children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsxs)(N.a.Title,{id:"success-alert-title",children:["Task ",de," Created"]})}),Object(x.jsxs)(N.a.Body,{children:["Details copied to clipboard",Object(x.jsx)("br",{}),Object(x.jsx)(S.a,{variant:"success",onClick:function(){window.open(st)},className:"button-to-the-right",children:Object(x.jsx)(ie.a,{})})]})]})]})})),de=a(243),be=r.a.memo((function(e){var t=Object(n.useState)(0),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1],j=function(){u(!1)},d=Object(n.useState)(),b=Object(l.a)(d,2),h=b[0],m=b[1],O=Object(n.useState)(),p=Object(l.a)(O,2),f=p[0],C=p[1],g=!0;return g=JSON.stringify(e.selected).length<3,Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-multiedit",children:"Edit Multiple"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){u(!0)},className:"button-to-the-left",disabled:g,children:Object(x.jsx)(de.a,{})})},"MultiEdit"),Object(x.jsxs)(N.a,{show:o,onHide:j,children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsx)(N.a.Title,{children:"Update Selected Tasks"})}),Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(D.a.Label,{children:"Priority:"}),Object(x.jsx)("br",{}),Object(x.jsx)(D.a.Check,{inline:!0,label:"1",type:"radio",name:"group1",id:"inline-radio-1",onChange:function(e){return m(1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"2",type:"radio",name:"group1",id:"inline-radio-2",onChange:function(e){return m(2)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"3",type:"radio",name:"group1",id:"inline-radio-3",onChange:function(e){return m(3)}}),Object(x.jsx)("br",{}),Object(x.jsx)(D.a.Label,{children:"Due Date:\xa0\xa0\xa0"}),Object(x.jsx)(J.a,{selected:f,onChange:function(e){C(e)},dateFormat:"dd/MM/yyyy",calendarStartDay:1}),Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Mark Urgent",style:{margin:5},onChange:function(e){c(1)}})]}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(S.a,{variant:"secondary",onClick:j,children:"Cancel"}),Object(x.jsx)(S.a,{variant:"primary",onClick:function(){u(!1);var t=[];Object.keys(e.selected).forEach((function(e){t.push(e),te(e,1===r?r:null)}));var a="";f&&(a=_()(f).format("YYYY-MM-DDThh:mm:ss.000")),void 0===h&&""===a||function(e,t,a){var n=JSON.stringify(e),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tasks:n,priority:t,duedate:a})};fetch("/editMultiple",r)}(t,h,a),m(),C(),c(0),setTimeout((function(){e.onClick()}),500)},children:"Save Changes"})]})]})]})})),he=(a(763),a(433)),me=a(158),Oe=a(159),xe=a(160),pe=a(165),fe=a(913),Ce=a(917),ge=a(431),ve=a(432),ye=a(199),Se=a(439),Ne=a(164),De=function(e){Object(xe.a)(a,e);var t=Object(pe.a)(a);function a(){return Object(me.a)(this,a),t.apply(this,arguments)}return Object(Oe.a)(a,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=(e.stroke,e.payload);return Object(x.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(x.jsx)("text",{x:0,y:0,dy:5,textAnchor:"start",fill:"#666",transform:"rotate(90)",children:n.value})})}}]),a}(n.PureComponent);var ke=function(){var e,t=Object(n.useState)({}),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){u(!0),fetch("/getEstimateSummary/").then((function(e){return e.json()})).then((function(e){c(e),u(!1)}))}),[]),e=!0===o?Object(x.jsx)(Ne.a,{color:"#282c34",height:200,width:200,ariLabel:"Loading"}):Object(x.jsxs)(fe.a,{width:400,height:250,data:r,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Username",height:60,interval:0,tick:Object(x.jsx)(De,{})}),Object(x.jsx)(ve.a,{label:{value:"Hours",angle:-90,position:"outsideLeft"}}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"Estimate",fill:"#202c40",maxBarSize:50})]}),Object(x.jsx)(x.Fragment,{children:e})},we=(a(894),r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(),b=Object(l.a)(d,2),h=b[0],O=b[1],p=Object(n.useState)(),f=Object(l.a)(p,2),C=f[0],g=f[1],v=Object(n.useState)(),y=Object(l.a)(v,2),N=y[0],D=y[1],k=Object(n.useState)(),w=Object(l.a)(k,2),T=w[0],I=w[1],M=Object(n.useState)(),J=Object(l.a)(M,2),P=J[0],_=J[1],R=Object(n.useState)(),F=Object(l.a)(R,2),L=F[0],E=F[1],A=Object(n.useState)(),H=Object(l.a)(A,2),B=H[0],W=H[1],z=Object(n.useState)(),G=Object(l.a)(z,2),K=G[0],q=G[1],Q=Object(n.useState)(),V=Object(l.a)(Q,2),X=V[0],Z=V[1],$=Object(n.useState)(),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(),re=Object(l.a)(ne,2),ce=re[0],se=re[1],ie=Object(n.useState)(),oe=Object(l.a)(ie,2),le=oe[0],ue=oe[1],je=Object(n.useState)(),de=Object(l.a)(je,2),be=de[0],me=de[1],Oe=Object(n.useState)(),xe=Object(l.a)(Oe,2),pe=xe[0],fe=xe[1],Ce=Object(n.useState)(),ge=Object(l.a)(Ce,2),ve=ge[0],ye=ge[1],Se=[{id:1,User:"Richard",p1:0,p2:0,p3:0},{id:2,User:"Wesley",p1:0,p2:0,p3:0},{id:5,User:"Stephen",p1:0,p2:0,p3:0},{id:6,User:"Gavin",p1:0,p2:0,p3:0},{id:7,User:"Neil",p1:0,p2:0,p3:0}],Ne=function(){var e=[1,2,3];Se.forEach((function(t){e.forEach((function(e){var a,n;(a=t.id,n=e,fetch("/getSummary/"+a+"&"+n).then((function(e){return e.json()}))).then((function(a){1===t.id&&1===e&&u(a[0][""]),1===t.id&&2===e&&O(a[0][""]),1===t.id&&3===e&&g(a[0][""]),2===t.id&&1===e&&D(a[0][""]),2===t.id&&2===e&&I(a[0][""]),2===t.id&&3===e&&_(a[0][""]),5===t.id&&1===e&&E(a[0][""]),5===t.id&&2===e&&W(a[0][""]),5===t.id&&3===e&&q(a[0][""]),6===t.id&&1===e&&Z(a[0][""]),6===t.id&&2===e&&ae(a[0][""]),6===t.id&&3===e&&se(a[0][""]),7===t.id&&1===e&&ue(a[0][""]),7===t.id&&2===e&&me(a[0][""]),7===t.id&&3===e&&fe(a[0][""])}))}))}))},De=function(){fetch("/getTaskCount").then((function(e){return e.json()})).then((function(e){ye(e[0][""])}))},we=0;Object(n.useEffect)((function(){0===we&&(Ne(),De(),we+=1)}));var Te=[{id:1,User:"Richard",p1:o,p2:h,p3:C,All:[o+h+C]},{id:2,User:"Wesley",p1:N,p2:T,p3:P,All:[N+T+P]},{id:5,User:"Stephen",p1:L,p2:B,p3:K,All:[L+B+K]},{id:6,User:"Gavin",p1:X,p2:te,p3:ce,All:[X+te+ce]},{id:7,User:"Neil",p1:le,p2:be,p3:pe,All:[le+be+pe]}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-summary",children:"Show Summary Table"}),children:Object(x.jsx)(S.a,{onClick:function(){c(!1===r),Ne(),De()},style:{margin:"5px"},variant:"secondary",children:Object(x.jsx)(he.a,{})})},"Summary"),Object(x.jsx)("div",{className:"summary",children:Object(x.jsxs)(m.a,{onClose:function(){return c(!1)},show:r,style:{width:"800px",height:"320px"},children:[Object(x.jsx)(m.a.Header,{children:Object(x.jsxs)("strong",{className:"me-auto",children:["Summary\xa0-\xa0\xa0",ve]})}),Object(x.jsxs)(m.a.Body,{children:[Object(x.jsx)("div",{className:"summary-grid",children:Object(x.jsx)(j.a,{idProperty:"id",columns:[{name:"User",header:"User",maxWidth:100,type:"string"},{name:"p1",header:"1",maxWidth:60,type:"number"},{name:"p2",header:"2",maxWidth:60,type:"number"},{name:"p3",header:"3",maxWidth:60,type:"number"},{name:"All",header:"All",maxWidth:72,type:"number"}],dataSource:Te,style:{minHeight:250,margin:5},theme:"default-dark",defaultSortInfo:{name:"All",dir:-1}})}),Object(x.jsx)("div",{className:"estimate-chart",children:Object(x.jsx)(ke,{})})]})]})})]})})));function Te(e,t,a,n,r,c,s){var i=0,o=s;""===s&&(o="nosearchentered");return{data:function(e,t,a,n,r,c,s){return fetch("/queryTasks/"+e+"&"+t+"&"+a+"&"+n+"&"+r+"&"+c+"&"+s).then((function(e){return e.json().then((function(e){return i=e.length,{data:e,count:e.length}}))}))}(e,t,a,n,r,c,o),count:i}}var Ie=a(194),Ue=a(248),Ye=a(434),Me=a(137);var Je=function(e){var t=e.data;return"C"===t.State?"global-custom-row-green":!0===t.Urgent?"global-custom-row-red":"global-custom-row"},Pe=function(e){if(!0===e.data.Complete)return"global-custom-row-light-green"};var _e=function(){document.title="HQ Business - Tasks";var e=sessionStorage.getItem("token"),t=JSON.parse(e),a=t.userId,r={SupportCode:0,Customer_Code:0,CustomerName:"All Customers",CustomerCode:0},c={Code:0,Department:"All Departments"},s={Username:"None Selected",UserId:0},i={UserId:t.userId,Username:t.username},o=Object(n.useState)([]),u=Object(l.a)(o,2),b=u[0],h=u[1],m=Object(n.useState)([]),O=Object(l.a)(m,2),p=O[0],f=O[1],C=Object(n.useState)(),g=Object(l.a)(C,2),M=g[0],P=g[1],R=Object(n.useState)(i),F=Object(l.a)(R,2),L=F[0],z=F[1],K=Object(n.useState)(1),Q=Object(l.a)(K,2),X=Q[0],ue=Q[1],de=Object(n.useState)(r),he=Object(l.a)(de,2),me=he[0],Oe=he[1],xe=Object(n.useState)(c),pe=Object(l.a)(xe,2),fe=pe[0],Ce=pe[1],ge=Object(n.useState)(!1),ve=Object(l.a)(ge,2),ye=ve[0],Se=ve[1],Ne=Object(n.useState)(!1),De=Object(l.a)(Ne,2),ke=De[0],_e=De[1],Re=Object(n.useState)(""),Fe=Object(l.a)(Re,2),Le=Fe[0],Ee=Fe[1],Ae=function(){h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data),Ba({})};Object(n.useEffect)((function(){var e=!0;return h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data),G().then((function(t){e&&jt(t)})),q().then((function(t){e&&it(t)})),V().then((function(t){e&&mt(t)})),1===X&&document.getElementById("inline-radio-1").click(),2===X&&document.getElementById("inline-radio-2").click(),3===X&&document.getElementById("inline-radio-3").click(),function(){return e=!1}}),[L,X,ye,me.Customer_Code,fe.Code,ke,Le]);var He=Object(n.useState)(null),Be=Object(l.a)(He,2),We=Be[0],ze=Be[1],Ge=Object(n.useState)(null),Ke=Object(l.a)(Ge,2),qe=Ke[0],Qe=Ke[1],Ve=Object(n.useState)(""),Xe=Object(l.a)(Ve,2),Ze=Xe[0],$e=Xe[1],et=Object(n.useState)(),tt=Object(l.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)([]),ct=Object(l.a)(rt,2),st=ct[0],it=ct[1],ot=Object(n.useState)([]),lt=Object(l.a)(ot,2),ut=lt[0],jt=lt[1],dt=Object(n.useState)([]),bt=Object(l.a)(dt,2),ht=bt[0],mt=bt[1],Ot=Object(n.useState)(),xt=Object(l.a)(Ot,2),pt=xt[0],ft=xt[1],Ct=Object(n.useState)([]),gt=Object(l.a)(Ct,2),vt=gt[0],yt=gt[1],St=Object(n.useState)(new Date),Nt=Object(l.a)(St,2),Dt=Nt[0],kt=Nt[1],wt=Object(n.useState)(new Date),Tt=Object(l.a)(wt,2),It=Tt[0],Ut=Tt[1],Yt=Object(n.useState)({}),Mt=Object(l.a)(Yt,2),Jt=Mt[0],Pt=Mt[1],_t=Object(n.useState)([]),Rt=Object(l.a)(_t,2),Ft=Rt[0],Lt=Rt[1],Et=Object(n.useState)([]),At=Object(l.a)(Et,2),Ht=At[0],Bt=At[1],Wt=Object(n.useState)([]),zt=Object(l.a)(Wt,2),Gt=zt[0],Kt=zt[1],qt=Object(n.useState)({}),Qt=Object(l.a)(qt,2),Vt=Qt[0],Xt=Qt[1],Zt=Object(n.useState)({}),$t=Object(l.a)(Zt,2),ea=$t[0],ta=$t[1],aa=Object(n.useState)("O"),na=Object(l.a)(aa,2),ra=na[0],ca=na[1],sa=Object(n.useState)(!1),ia=Object(l.a)(sa,2),oa=ia[0],la=ia[1],ua=Object(n.useState)(!1),ja=Object(l.a)(ua,2),da=ja[0],ba=ja[1],ha=Object(n.useState)(""),ma=Object(l.a)(ha,2),Oa=ma[0],xa=ma[1],pa=function(){la(!1),Ba({}),nt(),qa()},fa=Object(n.useCallback)((function(e){var t,a=e.data.Task;f((t=e.data.Task,fetch("/getItems/"+t).then((function(e){return e.json()})))),function(e){return Z.apply(this,arguments)}(a).then((function(e){Pt(e[0]),kt(new Date(e[0].DueDate)),Ut(new Date(e[0].Requested));for(var t=0;t<st.length;t++)st[t].Code===e[0].Department&&Xt(st[t]);for(var a=0;a<ht.length;a++)e[0].ActionBy===ht[a].UserId&&ta(ht[a]);ca(e[0].State);var n=new Date(e[0].DueDate),r=_()(n).format("DD-MM-YYYY");xa("mailto:?subject=Task:%20".concat(e[0].Issue_No,"&body=Company:%20").concat(e[0].Company_Name,"%0D%0AIssue:%20").concat(e[0].Issue_No,"%0D%0ADetails:%20").concat(e[0].Details,"%0D%0APriority:%20").concat(e[0].Priority,"%0D%0ADue:%20").concat(r))})),la(!0),setTimeout((function(){document.getElementById("addHistory").focus()}),20),ft(a),E(a).then((function(e){yt(e)}))}),[st,ht]),Ca=Object(n.useCallback)((function(e){var t=e.onDoubleClick;P(e.dataSourceArray.length),e.onDoubleClick=function(a){fa(e),t&&t(a)}}),[fa]),ga=function(){(pa(),void 0===Gt.UserId)?H(Jt,Ft.CustomerName,Ft.CustomerCode,Ht.Code,ea.UserId):(H(Jt,Ft.CustomerName,Ft.CustomerCode,Ht.Code,Gt.UserId),A("From "+ea.Username+" to "+Gt.Username,pt,a));if(""!==Ze&&(A(Ze,pt,a,at),$e("")),Lt([]),Kt([]),setTimeout((function(){h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data)}),500),void 0!==Ka){var e=[];Object.keys(Ka).forEach((function(t){e.push(t),!1===Ka[t].Complete?ae(t,1):ae(t,0)}))}""!==cn[0].item&&(cn.forEach((function(e){!function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Details:t,taskID:e})};fetch("/addItem/",a)}(Jt.Issue_No,e.item)})),sn([{item:""}]))},va=Object(n.useState)([]),ya=Object(l.a)(va,2),Sa=ya[0],Na=ya[1],Da=Object(n.useState)([]),ka=Object(l.a)(Da,2),wa=ka[0],Ta=ka[1],Ia=Object(n.useState)(),Ua=Object(l.a)(Ia,2),Ya=Ua[0],Ma=Ua[1],Ja=Object(n.useState)(0),Pa=Object(l.a)(Ja,2),_a=Pa[0],Ra=Pa[1],Fa=function(){ba(!1),Ma(0),Ta([]),Ra(0)},La=function(){var e;(e=pt,fetch("/getTimeSpent/"+e).then((function(e){return e.json()}))).then((function(e){Ra(e[0].TimeSpent),ba(!0)})),function(){return $.apply(this,arguments)}().then((function(e){Na(e)}))},Ea=Object(n.useState)({}),Aa=Object(l.a)(Ea,2),Ha=Aa[0],Ba=Aa[1],Wa=Object(n.useCallback)((function(e){var t=e.selected;!0!==t&&Ba(t)}),[]),za=Object(n.useState)(),Ga=Object(l.a)(za,2),Ka=Ga[0],qa=Ga[1],Qa=Object(n.useCallback)((function(e){var t=e.selected;!0!==t&&qa(t)}),[]),Va=[{name:"Task",header:"ID",type:"number",defaultFlex:1,maxWidth:70},{name:"Customer",header:"Customer",defaultFlex:1,maxWidth:200,minWidth:150},{name:"Details",header:"Details",defaultFlex:1,minWidth:500},{name:"Area",header:"Department",defaultFlex:1,maxWidth:130},{name:"Application",header:"Ref 1",defaultFlex:1,maxWidth:100},{name:"Reference2",header:"Ref 2",defaultFlex:1,maxWidth:100},{name:"Last Comment",header:"Last Comment",defaultFlex:1},{name:"Requested",header:"Requested",defaultFlex:1,maxWidth:115,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"Updated",header:"Updated",defaultFlex:1,maxWidth:115,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"DueDate",header:"Due Date",defaultFlex:1,maxWidth:115,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"Mins",header:"Estimate",type:"number",defaultFlex:1,maxWidth:120},{name:"Invoice",header:"Invoice",type:"number",defaultFlex:1},{name:"P",header:"P",type:"number",defaultFlex:1,maxWidth:75},{name:"ActionByUsername",header:"User",defaultFlex:1},{name:"Owner_Name",header:"Owner",defaultFlex:1}],Xa={SupportCode:0,Customer_Code:340,CustomerName:"HQ Software",CustomerCode:340},Za=Object(n.useState)(!1),$a=Object(l.a)(Za,2),en=$a[0],tn=$a[1],an=function(){return tn(!1)},nn=Object(n.useState)([{item:""}]),rn=Object(l.a)(nn,2),cn=rn[0],sn=rn[1],on=function(){sn([].concat(Object(v.a)(cn),[{item:""}]))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h5",{className:"task-amount-heading",children:["Total: ",M]}),Object(x.jsxs)("div",{className:"filter-row",children:[Object(x.jsxs)("div",{className:"button-group-left",children:[Object(x.jsx)(je,{filterUser:L,filterDepartment:fe,filterCustomer:me,onClick:Ae}),Object(x.jsx)(be,{selected:Ha,onClick:Ae}),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-clear",children:"Clear Filters"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){Oe(r),z(s),Ce(c),document.getElementById("inline-radio-4-all").click()},children:Object(x.jsx)(Ye.a,{})})},"ClearFilters"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-refresh",children:"Refresh"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data)},children:Object(x.jsx)(Ue.a,{})})},"Refresh")]}),Object(x.jsx)(D.a.Control,{value:Le,style:{width:300,margin:"5px"},placeholder:"Search...",onChange:function(e){Ee(e.target.value)}}),Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(me),style:{width:300,margin:"5px"},onChange:function(e){Oe(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(r),children:r.CustomerName}),Object(x.jsx)("option",{value:JSON.stringify(Xa),children:Xa.CustomerName}),ut.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]}),Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(L),style:{width:150,margin:"5px"},onChange:function(e){z(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(i),children:i.Username}),ht.map((function(e,t){return e.Username!==i.Username?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Username},t):null})),Object(x.jsx)("option",{value:JSON.stringify(s),children:"All Users"})]}),Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(fe),style:{width:200,margin:"5px"},onChange:function(e){return Ce(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(c),children:c.Department}),st.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Department},t)}))]}),Object(x.jsxs)("div",{className:"filter-P-radios",style:{margin:"5px"},children:[Object(x.jsx)(D.a.Check,{inline:!0,label:"1",type:"radio",name:"group1",id:"inline-radio-1",onChange:function(e){return ue(1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"2",type:"radio",name:"group1",id:"inline-radio-2",onChange:function(e){return ue(2)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"3",type:"radio",name:"group1",id:"inline-radio-3",onChange:function(e){return ue(3)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"ALL",type:"radio",name:"group1",id:"inline-radio-4-all",onChange:function(e){return ue(0)}})]}),Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Closed",onChange:function(e){Se(!1===ye)},style:{margin:"5px"}}),Object(x.jsx)(D.a.Check,{type:"checkbox",label:"Urgent Only",onChange:function(e){_e(!1===ke)},style:{margin:"5px"}}),Object(x.jsxs)("div",{className:"button-group-right",children:[Object(x.jsx)(we,{}),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-excel",children:"Export to Excel"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){!function(e){e.current.data.map((function(e){return e.Details=e.Details.toString().replace(",",""),e["Last Comment"]=e["Last Comment"].toString().replace(",",""),e.Details=e.Details.replace(/(\r\n|\n|\r)/gm,""),null}));var t={Sheets:{data:ce.utils.json_to_sheet(e.current.data)},SheetNames:["data"]},a=ce.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});se(n)}(We)},children:Object(x.jsx)(oe.b,{})})},"CSVEXPORT"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-pdf",children:"Export to PDF"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){!function(e,t){var a=new ne.default("landscape","pt"),n=[],r=[],c=[],s=[];s=0===t.Customer_Code?[[e.current.data[0].Task,e.current.data[0].Customer,e.current.data[0].Details,e.current.data[0].Area,e.current.data[0].Application,e.current.data[0].Requested,e.current.data[0].Contact,e.current.data[0]["Last Comment"],e.current.data[0].Updated,e.current.data[0].DueDate,e.current.data[0].Invoice,e.current.data[0].Priority,e.current.data[0].ActionByUsername,e.current.data[0].Owner_Name]]:[[e.current.data[0].Task,e.current.data[0].Details,e.current.data[0].Area,e.current.data[0].Application,e.current.data[0].Requested,e.current.data[0].Contact,e.current.data[0]["Last Comment"],e.current.data[0].Updated,e.current.data[0].DueDate,e.current.data[0].Invoice,e.current.data[0].Priority,e.current.data[0].ActionByUsername,e.current.data[0].Owner_Name]],"C"===e.current.data[0].State&&n.push(0),!0===e.current.data[0].Urgent&&r.push(0),1===e.current.data[0].P&&c.push(0);for(var i=[],o=1;o<e.current.data.length;o++)i=0===t.Customer_Code?[e.current.data[o].Task,e.current.data[o].Customer,e.current.data[o].Details,e.current.data[o].Area,e.current.data[o].Application,e.current.data[o].Requested,e.current.data[o].Contact,e.current.data[o]["Last Comment"],e.current.data[o].Updated,e.current.data[o].DueDate,e.current.data[o].Invoice,e.current.data[o].Priority,e.current.data[o].ActionByUsername,e.current.data[o].Owner_Name]:[e.current.data[o].Task,e.current.data[o].Details,e.current.data[o].Area,e.current.data[o].Application,e.current.data[o].Requested,e.current.data[o].Contact,e.current.data[o]["Last Comment"],e.current.data[o].Updated,e.current.data[o].DueDate,e.current.data[o].Invoice,e.current.data[o].Priority,e.current.data[o].ActionByUsername,e.current.data[o].Owner_Name],"C"===e.current.data[o].State&&n.push(o),!0===e.current.data[o].Urgent&&r.push(o),1===e.current.data[o].P&&c.push(o),s.push(i);var l=_()(new Date).format("Do MMMM YYYY"),u=t.CustomerName+" Report    -    "+l,j=[];j=0===t.Customer_Code?["Task","Customer","Details","Area","Section","Requested","Requestor","Status","Updated","Due Date","Invoice","P","User","Owner"]:["Task","Details","Area","Section","Requested","Requestor","Status","Updated","Due Date","P","User","Invoice","Owner"],a.autoTable({styles:{fontSize:8},theme:"grid",headStyles:{fillColor:[55,55,55]},head:[j],body:s,didParseCell:function(e){for(var t=0;t<n.length;t++)e.row.index===n[t]&&(e.cell.styles.fillColor=[87,222,107]);for(var a=0;a<r.length;a++)e.row.index===r[a]&&(e.cell.styles.fontStyle="bold");for(var s=0;s<c.length;s++)e.row.index===c[s]&&1===e.cell.raw&&(e.cell.styles.fillColor=[255,157,156])},didDrawPage:function(e){a.setFontSize(18),a.setTextColor(40),re&&a.addImage(re,"png",20,20,46.5,48,re,"FAST",0),a.text(u,e.settings.margin.left+50,50),a.setFontSize(8)},margin:{top:80}});var d="",b=_()(new Date).format("DDMMYYYY");d=0===t.Customer_Code?"HQSoftware_TASKS.pdf":t.CustomerName+"_TASKS_"+b,a.save(d)}(We,me)},children:Object(x.jsx)(Ie.a,{})})},"PDFEXPORT")]})]}),Object(x.jsx)("div",{className:"grid-div",children:Object(x.jsx)(j.a,{rowClassName:Je,handle:ze,idProperty:"Task",columns:Va,dataSource:b,style:{height:"100%",marginRight:10,marginLeft:10},theme:"default-dark",onRenderRow:Ca,selected:Ha,checkboxColumn:!0,onSelectionChange:Wa,defaultSortInfo:{name:"Task",dir:-1}})}),Object(x.jsxs)(N.a,{show:oa,onHide:pa,size:"lg",backdrop:"static",children:[Object(x.jsxs)(N.a.Header,{closeButton:!0,children:[Object(x.jsxs)(N.a.Title,{children:["Task: ",pt]}),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-pdf",children:"Mark/Unmark as Urgent"}),children:Object(x.jsx)(S.a,{variant:"danger",style:{Margin:10,position:"absolute",left:160},onClick:function(){var e=null;e=null===Jt.Urgent?1:null,te(pt,e),pa(),ga()},children:Object(x.jsx)(d.a,{})})},"Make-Urgent"),"C"===ra&&Object(x.jsx)(S.a,{variant:"danger",style:{Margin:10,position:"absolute",left:210},onClick:function(){pa(),function(e){var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskID:e})};fetch("/reOpenTask",t)}(pt),setTimeout((function(){h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data)}),50)},children:"Reopen Task"}),"O"===ra&&Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-close",children:"Close this Task"}),children:Object(x.jsx)(S.a,{variant:"danger",style:{Margin:10,position:"absolute",left:210},onClick:function(){pa(),La(),ga()},children:Object(x.jsx)(Me.a,{})})},"close-task"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-pdf",children:"Export history to PDF"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{position:"absolute",right:200},onClick:function(){!function(e,t){var a=new ne.default("landscape","pt"),n=t.Issue_No+"  -  "+t.Details,r=e.current.data[0].Minutes,c=[[e.current.data[0].Username,e.current.data[0].Time,e.current.data[0].Notes,e.current.data[0].Minutes]];"C"===e.current.data[0].State&&[].push(0);for(var s=1;s<e.current.data.length;s++){var i=[e.current.data[s].Username,e.current.data[s].Time,e.current.data[s].Notes,e.current.data[s].Minutes];c.push(i),r+=e.current.data[s].Minutes}var o="Time Spent - "+(r=Math.round(r/60*100)/100)+" hours";a.autoTable({styles:{fontSize:8},theme:"grid",headStyles:{fillColor:[55,55,55]},head:[["User","When","Notes","Minutes"]],body:c,didDrawPage:function(e){a.setFontSize(18),a.setTextColor(40),re&&a.addImage(re,"png",20,20,46.5,48,re,"FAST",0),a.setFontSize(8),a.setFontSize(18),a.text(n,e.settings.margin.left+50,30),a.setFontSize(11),a.setTextColor(100);var r=a.internal.pageSize,c=r.width?r.width:r.getWidth(),s=a.splitTextToSize(t.Notes,c-100,{});a.text(s,e.settings.margin.left+50,50),a.text(o,700,e.settings.margin.left)},startY:80});var l=t.Issue_No;a.save(l)}(qe,Jt)},children:Object(x.jsx)(Ie.a,{})})},"PDFEXPORT"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-save",children:"Save Changes"}),children:Object(x.jsx)(S.a,{variant:"secondary",onClick:pa&&ga,style:{position:"absolute",right:50},children:Object(x.jsx)(d.c,{})})},"save-task"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-email",children:"Email Task"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{position:"absolute",right:100},onClick:function(){window.open(Oa)},children:Object(x.jsx)(ie.a,{})})},"send-email"),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-save",children:"Copy Task"}),children:Object(x.jsx)(S.a,{variant:"secondary",onClick:function(){tn(!0),la(!1)},style:{position:"absolute",right:150},children:Object(x.jsx)(Me.b,{})})},"copy-task")]}),Object(x.jsx)(N.a.Body,{children:Object(x.jsxs)(k.a,{className:"mb-3",onSelect:function(e){"editTask"===e&&document.getElementById("inline-editradio-".concat(Jt.Priority)).click()},children:[Object(x.jsxs)(w.a,{eventKey:"history",title:"History",children:[Object(x.jsxs)(D.a,{children:[Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"addHistory",children:[Object(x.jsx)(D.a.Label,{children:"Add History:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add History...",value:Ze,onChange:function(e){return $e(e.target.value)},type:"text"})]}),Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"closeTask.Minutes",children:[Object(x.jsx)(D.a.Label,{children:"Add Time Spent:"}),Object(x.jsx)(D.a.Control,{as:"input",rows:1,type:"number",placeholder:"Minutes...",value:at,onChange:function(e){return nt(e.target.value)}})]})]}),Object(x.jsx)(j.a,{columns:[{name:"Username",header:"User"},{name:"Time",header:"When"},{name:"Notes",header:"Notes",minWidth:315},{name:"Minutes",header:"Minutes"}],dataSource:vt,editable:!0,style:{minHeight:400},handle:Qe})]}),Object(x.jsxs)(w.a,{eventKey:"editTask",title:"Edit",children:[Object(x.jsxs)(D.a,{children:[Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"editTask.CustomerSelect",children:[Object(x.jsx)("h7",{children:"Customer:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:ut.CustomerName,onChange:function(e){Lt(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{children:Jt.Company_Name}),Object(x.jsx)("option",{value:JSON.stringify(Xa),children:Xa.CustomerName}),ut.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"editTask.Department",children:[Object(x.jsx)(D.a.Label,{style:{display:"inline"},children:"Department:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:st.Department,onChange:function(e){Bt(JSON.parse(e.target.value)),console.log(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(Vt),children:Vt.Department}),st.map((function(e,t){return Vt.Department!==e.Department?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Department},t):null}))]})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{controlId:"editTask.UserSelect",children:[Object(x.jsx)(D.a.Label,{style:{display:"inline"},children:"For:"}),Object(x.jsxs)(D.a.Control,{size:"sm",as:"select",value:ht.UserName,onChange:function(e){Kt(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:ea,children:ea.Username}),ht.map((function(e,t){return ea.Username!==e.Username?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Username},t):null}))]})]})})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"editTask.Details",children:[Object(x.jsx)(D.a.Label,{children:"Details:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Details...",value:Jt.Details,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Details:e.target.value})}))},type:"text"})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"editTask.Notes",children:[Object(x.jsx)(D.a.Label,{children:"Notes:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Notes...",value:Jt.Notes,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Notes:e.target.value})}))},type:"text"})]})})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsxs)(I.a,{children:[Object(x.jsx)(D.a.Label,{children:"Due Date:\xa0\xa0\xa0"}),Object(x.jsx)(J.a,{selected:Dt,onChange:function(e){return Pt((function(t){return kt(new Date(e)),Object(y.a)(Object(y.a)({},t),{},{DueDate:_()(e).format("YYYY-MM-DDThh:mm:ss.000")})}))},dateFormat:"dd/MM/yyyy",calendarStartDay:1})]}),Object(x.jsxs)(I.a,{children:[Object(x.jsx)(D.a.Label,{children:"Requested Date:\xa0\xa0\xa0"}),Object(x.jsx)(J.a,{selected:It,onChange:function(e){return Pt((function(t){return Ut(e),Object(y.a)(Object(y.a)({},t),{},{Requested:_()(e).format("YYYY-MM-DDThh:mm:ss.000")})}))},dateFormat:"dd/MM/yyyy",calendarStartDay:1})]}),Object(x.jsxs)(I.a,{children:[Object(x.jsx)(D.a.Label,{children:"Priority:\xa0\xa0"}),Object(x.jsx)("br",{}),Object(x.jsx)(D.a.Check,{inline:!0,label:"1",type:"radio",name:"group1",id:"inline-editradio-1",onChange:function(e){return Pt((function(e){return Object(y.a)(Object(y.a)({},e),{},{Priority:1})}))}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"2",type:"radio",name:"group1",id:"inline-editradio-2",onChange:function(e){return Pt((function(e){return Object(y.a)(Object(y.a)({},e),{},{Priority:2})}))}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"3",type:"radio",name:"group1",id:"inline-editradio-3",onChange:function(e){return Pt((function(e){return Object(y.a)(Object(y.a)({},e),{},{Priority:3})}))}})]})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"editTask.Section",style:{marginTop:15},children:[Object(x.jsx)(D.a.Label,{children:"Reference 1:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Jt.Reference,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Reference:e.target.value})}))}})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Area",style:{marginTop:15},children:[Object(x.jsx)(D.a.Label,{children:"Reference 2:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Jt.Reference2,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Reference2:e.target.value})}))}})]})})]}),Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"editTask.Contact",children:[Object(x.jsx)(D.a.Label,{children:"Requester:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Jt.Reference3,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Reference3:e.target.value})}))}})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Estimate",children:[Object(x.jsx)(D.a.Label,{children:"Estimate:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Jt.Estimate,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Estimate:e.target.value})}))}})]})}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Invoice",children:[Object(x.jsx)(D.a.Label,{children:"Invoice:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Jt.Invoice,onChange:function(e){return Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Invoice:e.target.value})}))}})]})})]})]}),Object(x.jsx)(D.a.Label,{children:"Items:"}),cn.map((function(e,t){return Object(x.jsx)("div",{className:"box",children:Object(x.jsxs)(D.a.Group,{as:T.a,controlId:"newItems",style:{marginTop:5},children:[Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Control,{size:"sm",as:"textarea",rows:1,type:"text",name:"item",value:e.item,onChange:function(e){return function(e,t){var a=e.target,n=a.name,r=a.value,c=Object(v.a)(cn);c[t][n]=r,sn(c)}(e,t)}})}),Object(x.jsx)(I.a,{xs:1,children:1!==cn.length&&Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-removeitem",children:"Remove Item"}),children:Object(x.jsx)(S.a,{size:"sm",className:"mr10",variant:"secondary",onClick:function(){return function(e){var t=Object(v.a)(cn);t.splice(e,1),sn(t)}(t)},children:Object(x.jsx)(le.a,{})})},"RemoveItem")}),Object(x.jsx)(I.a,{xs:1,children:cn.length-1===t&&Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-additem",children:"Add Item"}),children:Object(x.jsx)(S.a,{size:"sm",variant:"secondary",onClick:on,children:Object(x.jsx)(le.b,{})})},"AddItem")})]})})}))]}),Object(x.jsx)(w.a,{eventKey:"items",title:"Items",children:Object(x.jsx)(j.a,{idProperty:"ID",selected:Ka,checkboxColumn:!0,onSelectionChange:Qa,columns:[{name:"ID",header:"ID",defaultVisible:!1},{name:"Details",header:"Details",minWidth:730}],dataSource:p,style:{minHeight:400},rowClassName:Pe,editable:!0})})]})})]}),Object(x.jsxs)(N.a,{show:da,onHide:Fa,children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsxs)(N.a.Title,{children:["Close Task: ",pt]})}),Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(D.a.Group,{controlId:"closeTask.ReasonSelect",children:Object(x.jsxs)(D.a.Control,{as:"select",value:Sa.Reason,onChange:function(e){return Ta(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:{},children:"Select Close Reason . . ."}),Sa.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Reason},t)}))]})}),Object(x.jsxs)(D.a.Label,{children:["Time Spent: ",_a]}),Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"closeTask.Minutes",children:[Object(x.jsx)(D.a.Label,{children:"Additional Minutes:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,type:"text",value:Ya,placeholder:"Additional Minutes...",onChange:function(e){return Ma(e.target.value)}})]})]}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(S.a,{variant:"secondary",onClick:Fa,children:"Cancel"}),Object(x.jsx)(S.a,{variant:"danger",onClick:Fa&&function(){Fa();var e="Task Closed: "+wa.Reason;void 0!==wa.Code?(A(e,pt,a,Ya),function(e,t,a){var n=new Date,r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({Task:e,Code:t,Minutes:a,Date:n})};fetch("/closeTask/",r)}(pt,wa.Code,Ya)):(alert("Please select Reason for Closing Task"),La()),setTimeout((function(){h(Te(L.UserId,X,ye,me.Customer_Code,fe.Code,ke,Le).data)}),500),Ma()},children:"Close Task"})]})]}),Object(x.jsxs)(N.a,{show:en,onHide:an,children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsxs)(N.a.Title,{children:["Copying task ",pt]})}),Object(x.jsxs)(N.a.Body,{children:["Are you sure you want to copy Task: ",pt," ?"]}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(S.a,{variant:"secondary",onClick:an,children:"Cancel"}),Object(x.jsx)(S.a,{variant:"primary",onClick:an&&function(){an(),W().then((function(e){ft(e[0][""]),B(e[0][""],Jt.Company_Name,Jt.Account,Jt.Details,Jt.Priority,Jt.DueDate,Jt.Requested,Jt.Department,Jt.Owner_Name,Jt.ActionBy,Jt.Reference,Jt.Reference3,Jt.Reference2,Jt.Notes,Jt.Reference4,Jt.Invoice,Jt.Urgent),ee(e[0][""],a),Pt((function(t){return Object(y.a)(Object(y.a)({},t),{},{Issue_No:e[0][""]})}));E(e[0][""]).then((function(e){yt(e),e.forEach((function(e){e.Minutes})),la(!0)})),setTimeout((function(){Ae()}),300)}))},children:"Yes"})]})]})]})};function Re(){return(Re=Object(L.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnSupportSummary/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var t=!0;return function(e){return Re.apply(this,arguments)}(e.customer).then((function(e){t&&c(e)})),function(){return t=!1}}),[e]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(j.a,{columns:[{name:"Username",header:"User",type:"strin",defaultFlex:1},{name:"Datetime",header:"When",defaultFlex:1},{name:"Details",header:"Details",defaultFlex:5,editable:!0},{name:"TimeSpent",header:"Time",defaultFlex:1}],dataSource:r,style:{minHeight:700,marginRight:10,marginLeft:10},theme:"default-dark"})})};function Le(){return(Le=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnCustomers");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnSupportReasons");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=function(){document.title="HQ Business - Support";var e=sessionStorage.getItem("token"),t=JSON.parse(e).userId,a={SupportCode:0,Customer_Code:0,CustomerName:"Select Customer",CustomerCode:0},r={Code:0,Reason:"Select Reason"},c=Object(n.useState)(a),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)([]),j=Object(l.a)(u,2),b=j[0],h=j[1],m=Object(n.useState)(""),O=Object(l.a)(m,2),p=O[0],f=O[1],C=Object(n.useState)(new Date),g=Object(l.a)(C,2),v=g[0],y=g[1],N=Object(n.useState)([]),k=Object(l.a)(N,2),w=k[0],T=k[1],I=Object(n.useState)(r),M=Object(l.a)(I,2),P=M[0],R=M[1],F=Object(n.useState)(0),L=Object(l.a)(F,2),E=L[0],A=L[1],H=Object(n.useState)(!1),B=Object(l.a)(H,2),W=B[0],z=B[1],G=Object(n.useState)("N"),K=Object(l.a)(G,2),q=K[0],Q=K[1],V=Object(n.useState)("N"),X=Object(l.a)(V,2),Z=X[0],$=X[1],ee=Object(n.useState)("N"),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)("N"),ce=Object(l.a)(re,2),se=ce[0],ie=ce[1],oe=Object(n.useState)("N"),le=Object(l.a)(oe,2),ue=le[0],je=le[1],de=Object(n.useState)(!1),be=Object(l.a)(de,2),he=be[0],me=be[1],Oe=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=!0;return function(){return Le.apply(this,arguments)}().then((function(t){e&&h(t)})),function(){return Ee.apply(this,arguments)}().then((function(t){e&&T(t)})),function(){return e=!1}}),[]);var xe=function(){Oe.current.reset(),me(!1),f(""),y(new Date),R(r),A(0),Q("N"),$("N"),ne("N"),ie("N"),je("N");var e=i;o(a),setTimeout((function(){o(e)}),50)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{style:{width:"35%",position:"fixed",right:"60%",marginTop:"2%",marginBottom:"100"},children:Object(x.jsxs)(D.a,{ref:Oe,validated:he,children:[Object(x.jsxs)(D.a.Group,{controlId:"select.customer",children:[Object(x.jsx)(D.a.Label,{children:"Customer: "}),Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(i),style:{display:"inline",margin:5,width:"80%"},onChange:function(e){o(JSON.parse(e.target.value)),document.getElementById("editTask.Details").focus()},children:[Object(x.jsx)("option",{value:JSON.stringify(a),children:a.CustomerName}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})]}),Object(x.jsx)(D.a.Group,{className:"mb-3",controlId:"editTask.Details",children:Object(x.jsx)(D.a.Control,{as:"textarea",rows:5,placeholder:"Details...",value:p,onChange:function(e){return f(e.target.value)},type:"text",style:{backgroundColor:"#fbff85"}})}),Object(x.jsx)(D.a.Group,{children:Object(x.jsx)(J.a,{selected:v,onChange:function(e){return y(e)},dateFormat:"dd/MM/yyyy",calendarStartDay:1})}),Object(x.jsxs)(D.a.Group,{children:[Object(x.jsx)(D.a.Label,{children:"Minutes:\xa0\xa0\xa0"}),Object(x.jsx)(D.a.Check,{inline:!0,label:"5",name:"group1",type:"radio",id:"inline-radio-5m",onChange:function(e){A(5),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"10",name:"group1",type:"radio",id:"inline-radio-10m",onChange:function(e){A(10),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"15",name:"group1",type:"radio",id:"inline-radio-15m",onChange:function(e){A(15),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"30",name:"group1",type:"radio",id:"inline-radio-30m",onChange:function(e){A(30),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"45",name:"group1",type:"radio",id:"inline-radio-45m",onChange:function(e){A(45),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"60",name:"group1",type:"radio",id:"inline-radio-60m",onChange:function(e){A(60),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"90",name:"group1",type:"radio",id:"inline-radio-90m",onChange:function(e){A(90),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"120",name:"group1",type:"radio",id:"inline-radio-120m",onChange:function(e){A(120),z(!1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Other",name:"group1",type:"radio",id:"inline-radio-other",onChange:function(e){A(),z(!0)}}),!0===W&&Object(x.jsx)(D.a.Control,{as:"textarea",rows:1,placeholder:"Minutes",value:E,onChange:function(e){return A(e.target.value)},type:"text",style:{position:"absolute",right:0,width:120,display:"inline"}})]}),Object(x.jsxs)(D.a.Group,{children:[Object(x.jsx)(D.a.Label,{children:"Actions: \xa0\xa0\xa0"}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Phone",name:"group2",type:"checkbox",id:"inline-check-phone",onChange:function(e){Q("N"===q?"Y":"N")}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Email",name:"group2",type:"checkbox",id:"inline-check-email",onChange:function(e){$("N"===Z?"Y":"N")}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Remote Access",name:"group2",type:"checkbox",id:"inline-check-remote",onChange:function(e){ne("N"===ae?"Y":"N")}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Site Visit",name:"group2",type:"checkbox",id:"inline-check-sitevisit",onChange:function(e){ie("N"===se?"Y":"N")}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Out of Hours",name:"group2",type:"checkbox",id:"inline-check-outofhours",onChange:function(e){je("N"===ue?"Y":"N")}})]}),Object(x.jsxs)(D.a.Group,{controlId:"support.ReasonSelect",children:[Object(x.jsx)(D.a.Label,{children:"Reason: \xa0\xa0\xa0\xa0\xa0"}),Object(x.jsxs)(D.a.Control,{as:"select",value:w.Reason,style:{display:"inline",margin:5,width:"80%"},onChange:function(e){return R(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:r,children:r.Reason}),w.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Reason},t)}))]})]}),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-save",children:"Save"}),children:Object(x.jsx)(S.a,{onClick:function(){var e=_()(v).format("YYYY-MM-DD hh:mm:ss");console.log(E),"Select Customer"===i.CustomerName?alert("Please Select a Customer"):""===p?alert("Please add Details"):0===E?alert("Please add Time"):0===P.Code?alert("Please Select a Reason"):(!function(e,t,a,n,r,c,s,i,o,l,u){var j={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({SupportCode:e,User:u,Date:a,Details:t,Phone:r,Email:c,Site:i,Minutes:n,Remote:s,Reason:l,OutOfHours:o})};fetch("/addQuickSupport/",j)}(i.SupportCode,p,e,E,q,Z,ae,se,ue,P.Code,t),xe())},className:"button-to-the-right",variant:"secondary",children:Object(x.jsx)("h4",{children:Object(x.jsx)(d.c,{})})})},"save-task")]})}),Object(x.jsx)("div",{style:{width:"40%",position:"absolute",left:"50%",marginTop:"2%"},children:Object(x.jsx)(Fe,{customer:i.SupportCode})})]})};a(291);var He=function(){var e=sessionStorage.getItem("token"),t=JSON.parse(e),a={SupportCode:0,Customer_Code:0,CustomerName:"All Customers",CustomerCode:0},r={UserId:t.userId,Username:t.username},c={SupportCode:0,Customer_Code:340,CustomerName:"HQ Software",CustomerCode:340},s=Object(n.useState)([]),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(null),b=Object(l.a)(d,2),h=b[0],m=b[1],O=Object(n.useState)([]),p=Object(l.a)(O,2),f=p[0],C=p[1],g=Object(n.useState)([]),v=Object(l.a)(g,2),y=v[0],N=v[1],k=Object(n.useState)(r),w=Object(l.a)(k,2),T=w[0],I=w[1],M=Object(n.useState)(a),P=Object(l.a)(M,2),R=P[0],F=P[1],L=new Date;L.setDate(L.getDate()+1);var E=Object(n.useState)(new Date),A=Object(l.a)(E,2),H=A[0],B=A[1],W=Object(n.useState)(L),z=Object(l.a)(W,2),K=z[0],q=z[1];Object(n.useEffect)((function(){var e=!0;return X(H,K,R,T),G().then((function(t){e&&C(t)})),V().then((function(t){e&&N(t)})),function(){return e=!1}}),[T,R.Customer_Code,H,K]);var Q=[{name:"Task",header:"ID",type:"number",defaultFlex:1,maxWidth:70},{name:"Customer",header:"Customer",defaultFlex:1,maxWidth:200,minWidth:150},{name:"Details",header:"Details",defaultFlex:1,minWidth:500},{name:"Owner_Name",header:"Owner",defaultFlex:1},{name:"ActionByUsername",header:"Allocated To",defaultFlex:1},{name:"Requested",header:"Requested",defaultFlex:1,maxWidth:115,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"DateCompleted",header:"Date Complete",defaultFlex:1,maxWidth:115,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"Estimate",header:"Estimate",defaultFlex:1,maxWidth:130},{name:"TimeSpent",header:"Minutes Spent",defaultFlex:1,maxWidth:100},{name:"DaysToComplete",header:"Days To Complete",defaultFlex:1,maxWidth:100}],X=function(e,t,a,n){var r=_()(e).format("YYYY-MM-DDT00:00:00"),c=_()(t).format("YYYY-MM-DDT11:59:59"),s=function(e,t,a,n){return fetch("/getCloseTaskGrid/"+e+"&"+t+"&"+a+"&"+n).then((function(e){return e.json()}))}(a.Customer_Code,n.UserId,r,c);u(s)};return Object(x.jsxs)("div",{class:"closed-report",children:[Object(x.jsxs)("div",{className:"first-row",children:[Object(x.jsx)("div",{className:"item",children:Object(x.jsx)("h1",{class:"font-weight-light",children:"Closed Tasks"})}),Object(x.jsx)("div",{className:"item",children:Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(R),onChange:function(e){F(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(a),children:a.CustomerName}),Object(x.jsx)("option",{value:JSON.stringify(c),children:c.CustomerName}),f.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})}),Object(x.jsx)("div",{className:"item",children:Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(T),onChange:function(e){I(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(r),children:r.Username}),y.map((function(e,t){return e.Username!==r.Username?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Username},t):null})),Object(x.jsx)("option",{value:JSON.stringify({Username:"None Selected",UserId:0}),children:"All Users"})]})}),Object(x.jsx)("div",{class:"item",children:Object(x.jsx)(J.a,{selected:H,onChange:function(e){B(e)},selectsStart:!0,startDate:H,endDate:K,dateFormat:"dd/MM/yyyy"})}),Object(x.jsx)("div",{class:"item",children:Object(x.jsx)(J.a,{selected:K,onChange:function(e){q(e)},selectsEnd:!0,startDate:H,endDate:K,minDate:H,dateFormat:"dd/MM/yyyy"})}),Object(x.jsxs)("div",{className:"item",children:[Object(x.jsx)(U.a,{overlay:Object(x.jsx)(Y.a,{id:"tooltip-pdf",children:"Export to PDF"}),children:Object(x.jsx)(S.a,{variant:"secondary",onClick:function(){!function(e,t){var a=new ne.default("landscape","pt"),n=[],r=[[e.current.data[0].Task,e.current.data[0].Details,e.current.data[0].Requested,e.current.data[0].DateCompleted,e.current.data[0].DaysToComplete,e.current.data[0].TimeSpent,e.current.data[0].ActionByUsername]];"C"===e.current.data[0].State&&n.push(0);for(var c=1;c<e.current.data.length;c++){var s=[e.current.data[c].Task,e.current.data[c].Details,e.current.data[c].Requested,e.current.data[c].DateCompleted,e.current.data[c].DaysToComplete,e.current.data[c].TimeSpent,e.current.data[c].ActionByUsername];"C"===e.current.data[c].State&&n.push(c),r.push(s)}var i=_()(new Date).format("Do MMMM YYYY"),o=t.CustomerName+" Closed Tasks    -    "+i;a.autoTable({styles:{fontSize:8},theme:"grid",headStyles:{fillColor:[55,55,55]},head:[["Task","Details","Requested","Completed","Days","Time","User"]],body:r,didParseCell:function(e){for(var t=0;t<n.length;t++)e.row.index===n[t]&&(e.cell.styles.fillColor=[87,222,107])},didDrawPage:function(e){a.setFontSize(18),a.setTextColor(40),re&&a.addImage(re,"png",20,20,46.5,48,re,"FAST",0),a.text(o,e.settings.margin.left+50,50),a.setFontSize(8)},margin:{top:80}});var l="",u=_()(new Date).format("DDMMYYYY");l=0===t.Customer_Code?"HQSoftware_CLOSEDTASKS.pdf":t.CustomerName+"_CLOSEDTASKS_"+u,a.save(l)}(h,R)},children:Object(x.jsx)(Ie.a,{})})},"PDFEXPORT"),Object(x.jsx)(U.a,{overlay:Object(x.jsx)(Y.a,{id:"tooltip-refresh",children:"Refresh"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{marginLeft:"10px"},onClick:function(){X(H,K,R,T)},children:Object(x.jsx)(Ue.a,{})})},"refresh")]})]}),Object(x.jsx)("div",{className:"closed-grid",children:Object(x.jsx)(j.a,{handle:m,idProperty:"Task",columns:Q,dataSource:o,style:{minHeight:"80vh"},theme:"default-dark"})})]})};var Be=function(e){Object(xe.a)(a,e);var t=Object(pe.a)(a);function a(){return Object(me.a)(this,a),t.apply(this,arguments)}return Object(Oe.a)(a,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=(e.stroke,e.payload);return Object(x.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(x.jsx)("text",{x:0,y:0,dy:5,textAnchor:"start",fill:"#666",transform:"rotate(90)",children:n.value})})}}]),a}(n.PureComponent);var We=function(){var e=new Date;e.setDate(e.getDate()+1);var t,a,r=Object(n.useState)(new Date),c=Object(l.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(e),u=Object(l.a)(o,2),j=u[0],d=u[1],b=Object(n.useState)(!0),h=Object(l.a)(b,2),m=h[0],O=h[1],p=Object(n.useState)(!0),f=Object(l.a)(p,2),C=(f[0],f[1]),g=Object(n.useState)([]),v=Object(l.a)(g,2),y=v[0],S=v[1],N=Object(n.useState)(3),k=Object(l.a)(N,2),w=k[0],T=k[1],I=sessionStorage.getItem("token"),U=JSON.parse(I),Y={UserId:U.userId,Username:U.username},M=Object(n.useState)(Y),P=Object(l.a)(M,2),R=P[0],F=P[1],L=Object(n.useState)([]),E=Object(l.a)(L,2),A=E[0],H=E[1],B=Object(n.useState)([]),W=Object(l.a)(B,2),z=W[0],G=W[1];return Object(n.useEffect)((function(){O(!0),C(!0);var e=_()(s).format("YYYY-MM-DDT00:00:00"),t=_()(j).format("YYYY-MM-DDT11:59:59");(function(e,t,a){return fetch("/getTimeReport/"+e+"&"+t+"&"+a).then((function(e){return e.json()}))})(e,t,R.UserId).then((function(e){H(e),O(!1)})),function(e,t){return fetch("/getUserTimeReport/"+e+"&"+t).then((function(e){return e.json()}))}(e,t).then((function(e){G(e),C(!1)})),V().then((function(e){S(e)})),1===w&&document.getElementById("inline-radio-1").click(),2===w&&document.getElementById("inline-radio-2").click(),3===w&&document.getElementById("inline-radio-3").click(),console.log(z)}),[s,j,R]),3===w?t=Object(x.jsxs)("div",{className:"bar-chart-wrap ",children:[Object(x.jsx)("div",{className:"main-chart item",children:Object(x.jsxs)(fe.a,{width:1100,height:700,data:A,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Customer",height:250,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"SupportTime",fill:"#202c40",maxBarSize:50}),Object(x.jsx)(Se.a,{dataKey:"TaskTime",fill:"#c9b428",maxBarSize:50})]})}),Object(x.jsx)("div",{className:"user-chart item",children:Object(x.jsxs)(fe.a,{width:400,height:400,data:z,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Username",height:150,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"SupportMinutes",fill:"#202c40",maxBarSize:50}),Object(x.jsx)(Se.a,{dataKey:"TaskMinutes",fill:"#c9b428",maxBarSize:50})]})})]}):2===w?t=Object(x.jsxs)("div",{className:"bar-chart-wrap ",children:[Object(x.jsx)("div",{className:"main-chart item",children:Object(x.jsxs)(fe.a,{width:1100,height:700,data:A,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Customer",height:150,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"TaskTime",fill:"#c9b428",maxBarSize:50})]})}),Object(x.jsx)("div",{className:"user-chart item",children:Object(x.jsxs)(fe.a,{width:400,height:400,data:z,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Username",height:40,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"TaskMinutes",fill:"#c9b428",maxBarSize:50})]})})]}):1===w&&(t=Object(x.jsxs)("div",{className:"bar-chart-wrap ",children:[Object(x.jsx)("div",{className:"main-chart item",children:Object(x.jsxs)(fe.a,{width:1100,height:700,data:A,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Customer",height:150,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"SupportTime",fill:"#202c40",maxBarSize:50})]})}),Object(x.jsx)("div",{className:"user-chart item",children:Object(x.jsxs)(fe.a,{width:400,height:400,data:z,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Username",height:50,interval:0,tick:Object(x.jsx)(Be,{})}),Object(x.jsx)(ve.a,{}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Se.a,{dataKey:"SupportMinutes",fill:"#202c40",maxBarSize:50})]})})]})),a=!1===m?0===A.length?Object(x.jsx)("div",{className:"bar-chart-wrap spinner",children:Object(x.jsx)("h3",{children:"No Data for this selection"})}):t:Object(x.jsx)("div",{className:"bar-chart-wrap spinner",children:Object(x.jsx)(Ne.a,{color:"#282c34",height:200,width:200,ariLabel:"Loading"})}),Object(x.jsxs)("div",{class:"time-report",children:[Object(x.jsxs)("div",{className:"first-row",children:[Object(x.jsx)("h1",{class:"font-weight-light heading item",children:"Time Spent"}),Object(x.jsx)("div",{class:"date item",children:Object(x.jsx)(J.a,{selected:s,onChange:function(e){i(e)},selectsStart:!0,startDate:s,endDate:j,dateFormat:"dd/MM/yyyy"})}),Object(x.jsx)("div",{class:"date item",children:Object(x.jsx)(J.a,{selected:j,onChange:function(e){d(e)},selectsEnd:!0,startDate:s,endDate:j,minDate:s,dateFormat:"dd/MM/yyyy"})}),Object(x.jsxs)("div",{className:"item radios",children:[Object(x.jsx)(D.a.Check,{inline:!0,label:"Support",type:"radio",name:"group1",id:"inline-radio-1",onChange:function(e){return T(1)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Tasks",type:"radio",name:"group1",id:"inline-radio-2",onChange:function(e){return T(2)}}),Object(x.jsx)(D.a.Check,{inline:!0,label:"Both",type:"radio",name:"group1",id:"inline-radio-3",onChange:function(e){return T(3)}})]}),Object(x.jsx)("div",{className:"user-select item",children:Object(x.jsxs)(D.a.Control,{as:"select",value:y.Username,onChange:function(e){var t=JSON.parse(e.target.value);F(t)},children:[Object(x.jsx)("option",{value:JSON.stringify(Y),children:Y.Username}),y.map((function(e,t){return e.Username!==Y.Username?Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Username},t):null})),Object(x.jsx)("option",{value:JSON.stringify({Username:"none",UserId:"0"}),children:"All Users"})]})})]}),a]})},ze=(a(895),a(139)),Ge=a(435);var Ke=function(){return Object(x.jsxs)(ze.c,{breakpoint:"xl",children:[Object(x.jsx)(ze.d,{children:Object(x.jsxs)(ze.a,{iconShape:"circle",children:[Object(x.jsxs)(ze.b,{icon:Object(x.jsx)(le.c,{}),children:["Time Spent",Object(x.jsx)(i.b,{to:"/Report1"})]}),Object(x.jsxs)(ze.b,{icon:Object(x.jsx)(Ge.a,{}),children:["Closed Tasks",Object(x.jsx)(i.b,{to:"/Report1/Closed"})]}),Object(x.jsxs)(ze.b,{icon:Object(x.jsx)(Me.d,{}),children:["Schedule",Object(x.jsx)(i.b,{to:"/Report1/Schedule"})]})]})}),Object(x.jsx)("div",{style:{height:"80vh",display:"inline"}})]})},qe=(a(896),a(918)),Qe=a(195),Ve=function(e,t,a){var n,r,c=new Date,s=c.getDate()+a-c.getDay()+1,i=_()(c.setDate(s)).format("YYYY-MM-DDT00:00:00"),o={Week:_()(c).format("DD-MM"),Richard:0,Wesley:0,Stephen:0,Neil:0,Gavin:0};return(n=i,fetch("/getScheduledTimeByWeek/"+n+"&"+r).then((function(e){return e.json()}))).then((function(e){e.map((function(e){"Richard"===e.Username?o.Richard=e.Hours:"Wesley"===e.Username?o.Wesley=e.Hours:"Stephen"===e.Username?o.Stephen=e.Hours:"Gavin"===e.Username?o.Gavin=e.Hours:"Neil"===e.Username&&(o.Neil=e.Hours)}))})),e.push(o),e};n.PureComponent;var Xe=function(){var e,t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){u(!0);for(var e=[],t=[0,7,14,21,28,35,42,49,56,63],a=0;a<t.length;a++)c(Ve(e,0,t[a]));setTimeout((function(){u(!1)}),3e3)}),[]),e=!1===o?Object(x.jsx)(qe.a,{width:"100%",height:"100%",children:Object(x.jsxs)(fe.a,{width:1600,height:700,data:r,children:[Object(x.jsx)(Ce.a,{}),Object(x.jsx)(ge.a,{dataKey:"Week",height:60,interval:0,label:{value:"Week Starting on:",angle:0,position:"outsideLeft"}}),Object(x.jsx)(ve.a,{label:{value:"Hours",angle:-90,position:"insideLeft"}}),Object(x.jsx)(ye.a,{}),Object(x.jsx)(Qe.a,{}),Object(x.jsx)(Se.a,{dataKey:"Richard",fill:"#ff3c2e"}),Object(x.jsx)(Se.a,{dataKey:"Wesley",fill:"#dbbe00"}),Object(x.jsx)(Se.a,{dataKey:"Stephen",fill:"#2eff35"}),Object(x.jsx)(Se.a,{dataKey:"Gavin",fill:"#2e9dff"}),Object(x.jsx)(Se.a,{dataKey:"Neil",fill:"#202c40"})]})}):Object(x.jsx)("div",{className:"bar-chart-wrap spinner",children:Object(x.jsx)(Ne.a,{color:"#282c34",height:200,width:200,ariLabel:"Loading"})}),Object(x.jsx)("div",{className:"main",children:e})};var Ze=function(){return document.title="HQ Business - Reports",Object(x.jsx)("div",{className:"Report1",children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(Ke,{}),Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/Report1",exact:!0,component:function(){return Object(x.jsx)(We,{})}}),Object(x.jsx)(o.a,{path:"/Report1/Closed",exact:!0,component:function(){return Object(x.jsx)(He,{})}}),Object(x.jsx)(o.a,{path:"/Report1/Schedule",exact:!0,component:function(){return Object(x.jsx)(Xe,{})}})]})]})})},$e=function(e){return fetch("/returnErrors/"+e).then((function(e){return e.json()}))},et=function(){return fetch("/returnAlerts").then((function(e){return e.json()}))},tt=function(e){return fetch("/getErrorCount/"+e).then((function(e){return e.json()}))},at=function(e,t){var a=[];Object.keys(t).forEach((function(e){a.push(e)})),function(e,t){var a=JSON.stringify(e),n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({Details:a,Status:t})};fetch("/processErrors",n)}(a,e)};var nt=function(){document.title="HQ Business - Errors";var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({}),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)([]),d=Object(l.a)(u,2),b=d[0],h=d[1],m=Object(n.useState)(),O=Object(l.a)(m,2),p=O[0],f=O[1];Object(n.useEffect)((function(){var e=!0;return 0?($e(JSON.parse(localStorage.getItem("CustomerErrorCheck")).CustomerCode).then((function(t){e&&r(t)})),et().then((function(t){e&&h(t)})),tt(JSON.parse(localStorage.getItem("CustomerErrorCheck")).CustomerCode).then((function(e){f(e[0][""])})),o(JSON.parse(localStorage.getItem("CustomerErrorCheck"))),1):($e(i.CustomerCode).then((function(t){e&&r(t)})),et().then((function(t){e&&h(t)})),tt(i.CustomerCode).then((function(e){f(e[0][""])}))),function(){return e=!1}}),[i]);var C=function(e){$e(e.CustomerCode).then((function(e){r(e)})),tt(e.CustomerCode).then((function(e){f(e[0][""]),0===e[0][""]&&o(L)}))},g=[{name:"Customer_Name",header:"Customer",type:"string",defaultFlex:1},{name:"Details",header:"Details",type:"string",defaultFlex:9},{name:"ErrorDate",header:"Error Date",type:"string",defaultFlex:1,sort:function(e,t){return e=_()(e,"DD/MM/YYYY, HH:mm:ss",!0).format(),t=_()(t,"DD/MM/YYYY, HH:mm:ss",!0).format(),new Date(e)-new Date(t)}},{name:"UploadDate",header:"Upload Date",type:"string",defaultFlex:1,sort:function(e,t){return e=_()(e,"DD/MM/YYYY, HH:mm:ss",!0).format(),t=_()(t,"DD/MM/YYYY, HH:mm:ss",!0).format(),new Date(e)-new Date(t)}}],v=Object(n.useState)({}),y=Object(l.a)(v,2),k=y[0],w=y[1],T=Object(n.useCallback)((function(e){var t=e.selected;!0!==t&&w(t)}),[]),I=Object(n.useState)(!1),M=Object(l.a)(I,2),J=M[0],P=M[1],R=function(){P(!1),w({}),setTimeout((function(){C(i),et().then((function(e){h(e)}))}),500)},F=!0;F=JSON.stringify(k).length<3;var L={CustomerCode:0,Customer_Name:"All Errors",ErrorCount:0};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"errors",children:[Object(x.jsxs)("div",{className:"top-row",children:[Object(x.jsxs)("div",{className:"first-item",children:[Object(x.jsxs)("h3",{children:["Total Errors: ",p]}),Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-pdf",children:"Flag Selected Errors"}),children:Object(x.jsx)(S.a,{variant:"secondary",onClick:function(){P(!0)},disabled:F,className:"button-to-the-right",children:Object(x.jsx)(Me.c,{})})},"Make-Urgent")]}),Object(x.jsx)("div",{className:"third-item",children:Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(i),onChange:function(e){o(JSON.parse(e.target.value)),C(JSON.parse(e.target.value))},children:[Object(x.jsx)("option",{value:JSON.stringify(L),children:L.Customer_Name}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.Customer_Name},t)}))]})})]}),Object(x.jsx)(j.a,{idProperty:"Details",columns:g,dataSource:a,style:{height:"100%"},theme:"default-dark",selected:k,checkboxColumn:!0,onSelectionChange:T,editable:!0})]}),Object(x.jsxs)(N.a,{show:J,onHide:R,children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsx)(N.a.Title,{children:"Flag Errors"})}),Object(x.jsx)(N.a.Body,{children:"How do you want to flag the selected Errors?"}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(S.a,{variant:"secondary",onClick:R,children:"Cancel"}),Object(x.jsx)(S.a,{variant:"primary",onClick:function(){at("R",k),R()},children:"Reviewed"}),Object(x.jsx)(S.a,{variant:"primary",onClick:function(){at("C",k),R()},children:"Confirmed"})]})]})]})};a(897);var rt=function(e){var t=sessionStorage.getItem("token"),a=JSON.parse(t).username,r=!0;null!==e.product.ProductID&&(r=!1);var c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)(""),j=Object(l.a)(u,2),d=j[0],b=j[1],h=Object(n.useState)(""),m=Object(l.a)(h,2),O=m[0],p=m[1],f=Object(n.useState)(""),C=Object(l.a)(f,2),g=C[0],v=C[1],y=Object(n.useState)(""),k=Object(l.a)(y,2),w=k[0],M=k[1],J=function(){o(!1),b(""),p(""),v(""),M("")},P=function(){fetch("/newUpdateId").then((function(e){return e.json()})).then((function(t){(function(e,t,a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Username:e,Version:t,ProductID:a})};return fetch("/addUpdateHeader/",n)})(a,d,e.product.ProductID).then((function(){(function(e,t,a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UpdateId:e,Details:t,Comment:a})};return fetch("/addUpdateDetail/",n)})(t[0][""],O,w).then((function(){(function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UpdateId:e,Sql:t})};return fetch("/addUpdateSQL/",a)})(t[0][""],g).then((function(){e.reLoad(e.product)}))}))}))})),J()};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-newversion",children:"New Version"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:5},onClick:function(){o(!0),setTimeout((function(){document.getElementById("newVersionInput").focus()}),20)},className:"button-to-the-left",disabled:r,children:Object(x.jsx)(oe.a,{})})},"NewVersion"),Object(x.jsxs)(N.a,{show:i,onHide:J,size:"lg",children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsxs)(N.a.Title,{children:["New Version - ",e.product.ProductName," "]})}),Object(x.jsx)(N.a.Body,{children:Object(x.jsxs)(D.a,{children:[Object(x.jsxs)(T.a,{children:[Object(x.jsx)(I.a,{xs:2,children:Object(x.jsx)("h7",{children:"Version:"})}),Object(x.jsx)(I.a,{children:Object(x.jsx)(D.a.Group,{className:"mb-3",controlId:"newVersionInput",children:Object(x.jsx)(D.a.Control,{style:{display:"inline"},size:"sm",as:"textarea",rows:1,type:"text",value:d,onChange:function(e){return b(e.target.value)},controlId:"newVersionInput"})})})]}),Object(x.jsx)(T.a,{children:Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Details",children:[Object(x.jsx)("h7",{children:"Description:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add Decription...",value:O,onChange:function(e){return p(e.target.value)},type:"text",size:"sm"})]})})}),Object(x.jsx)(T.a,{children:Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Notes",children:[Object(x.jsx)("h7",{children:"SQL:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add SQL...",value:g,onChange:function(e){return v(e.target.value)},type:"text",size:"sm"})]})})}),Object(x.jsx)(T.a,{children:Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"newTask.Notes",children:[Object(x.jsx)("h7",{children:"Comment:"}),Object(x.jsx)(D.a.Control,{as:"textarea",rows:3,placeholder:"Add Comment...",value:w,onChange:function(e){return M(e.target.value)},type:"text",size:"sm"})]})})})]})}),Object(x.jsxs)(N.a.Footer,{children:[Object(x.jsx)(S.a,{variant:"secondary",onClick:J,children:"Close"}),Object(x.jsx)(S.a,{variant:"primary",onClick:function(){P(),J()},children:"Create Version"})]})]})]})},ct=function(e){return fetch("/returnProductGrid/"+e).then((function(e){return e.json()}))};var st=function(){document.title="HQ Business - Products";var e={MailingList:"",ProductID:null,ProductName:"Select a Product",ProductURL:""},t=Object(n.useState)({}),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(e),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)([]),b=Object(l.a)(d,2),h=b[0],m=b[1];Object(n.useEffect)((function(){var e=!0;return fetch("/returnProductList").then((function(e){return e.json()})).then((function(t){e&&m(t)})),function(){return e=!1}}),[]);var O=[{name:"Datetime",header:"Date",type:"string",defaultFlex:1,sort:function(e,t){return e=_()(e,"DD/MM/YYYY",!0).format(),t=_()(t,"DD/MM/YYYY",!0).format(),new Date(e)-new Date(t)}},{name:"Version",header:"Version",type:"string",defaultFlex:1},{name:"Username",header:"User",type:"string",defaultFlex:1},{name:"UpdateDesc",header:"Description",type:"string",minWidth:1255,defaultFlex:1}];return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"Products",children:[Object(x.jsxs)(T.a,{size:"xs",children:[Object(x.jsx)(I.a,{children:Object(x.jsx)(rt,{product:o,reLoad:function(e){ct(e.ProductID).then((function(e){c(e)}))}})}),Object(x.jsx)(I.a,{children:Object(x.jsx)("h3",{children:o.ProductName})}),Object(x.jsx)(I.a,{children:Object(x.jsx)("h6",{className:"productURL",children:Object(x.jsx)("a",{href:o.ProductURL,children:o.ProductURL})})}),Object(x.jsx)(I.a,{}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(D.a.Control,{as:"select",value:JSON.stringify(o),style:{display:"inline",margin:5,width:400},onChange:function(e){var t;u(JSON.parse(e.target.value)),t=JSON.parse(e.target.value),ct(t.ProductID).then((function(e){c(e)}))},children:[Object(x.jsx)("option",{value:JSON.stringify(e),children:e.ProductName},0),h.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.ProductName},t)}))]})})]}),Object(x.jsx)(T.a,{children:Object(x.jsx)(j.a,{idProperty:"id",columns:O,dataSource:r,style:{minHeight:750,margin:10},theme:"default-dark",editable:!0})})]})})};a(412);function it(){return(it=Object(L.a)(F.a.mark((function e(){var t,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/returnCustomers");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ot=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(e.list),i=Object(l.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)([]),d=Object(l.a)(j,2),b=d[0],h=d[1],m=function(){c(!1),u(e.list)};return Object(n.useEffect)((function(){u(e.list),function(){return it.apply(this,arguments)}().then((function(e){h(e)}))}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(U.a,{placement:"bottom",overlay:Object(x.jsx)(Y.a,{id:"tooltip-multiedit",children:"Edit Customers"}),children:Object(x.jsx)(S.a,{variant:"secondary",style:{margin:"5px"},onClick:function(){c(!0)},className:"button-to-the-left",children:Object(x.jsx)(de.a,{})})},"MultiEdit"),Object(x.jsxs)(N.a,{show:r,onHide:m,children:[Object(x.jsx)(N.a.Header,{closeButton:!0,children:Object(x.jsx)(N.a.Title,{children:"Update Selected Customers"})}),Object(x.jsx)(N.a.Body,{children:Object(x.jsxs)("div",{className:"modal-wrapper",children:[Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"1: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[0]={Web_List_Placement:1,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"2: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[1]={Web_List_Placement:2,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"3: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[2]={Web_List_Placement:3,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"4: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[3]={Web_List_Placement:4,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"5: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[4]={Web_List_Placement:5,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"6: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[5]={Web_List_Placement:6,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"7: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[6]={Web_List_Placement:7,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"8: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[7]={Web_List_Placement:8,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"9: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[8]={Web_List_Placement:9,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]}),Object(x.jsxs)("div",{className:"item-row",children:[Object(x.jsx)("div",{className:"left-col",children:Object(x.jsx)(D.a.Label,{children:"10: "})}),Object(x.jsx)("div",{className:"right-col",children:Object(x.jsxs)(D.a.Control,{as:"select",style:{display:"inline",margin:5},onChange:function(e){var t=JSON.parse(e.target.value);o[9]={Web_List_Placement:10,Customer_Code:t.Customer_Code,Customer_Name:t.CustomerName}},children:[Object(x.jsx)("option",{}),b.map((function(e,t){return Object(x.jsx)("option",{value:JSON.stringify(e),children:e.CustomerName},t)}))]})})]})]})}),Object(x.jsx)(N.a.Footer,{children:Object(x.jsx)(S.a,{variant:"primary",onClick:function(){m(),fetch("/resetCustomerList",{method:"PUT",headers:{"Content-Type":"application/json"}}).then((function(){(function(e){var t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({one:e[0].Customer_Code,two:e[1].Customer_Code,three:e[2].Customer_Code,four:e[3].Customer_Code,five:e[4].Customer_Code,six:e[5].Customer_Code,seven:e[6].Customer_Code,eight:e[7].Customer_Code,nine:e[8].Customer_Code,ten:e[9].Customer_Code})};return fetch("/updateCustomerList",t)})(o).then((function(){e.onChange()}))}))},children:"Save Changes"})})]})]})})),lt=function(){return fetch("/getTopSelectedCustomers").then((function(e){return e.json()}))};var ut=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)([]),s=Object(l.a)(c,2),i=s[0],o=s[1],u=Object(n.useState)(!0),d=Object(l.a)(u,2),b=d[0],h=d[1],m={minHeight:500,margin:10};Object(n.useEffect)((function(){h(!0),fetch("/getTopSupportCustomers").then((function(e){return e.json()})).then((function(e){r(e)})),lt().then((function(e){o(e),h(!1)}))}),[]);var O=sessionStorage.getItem("token"),p=JSON.parse(O).userId,f=Object(x.jsx)("div",{});return 1===p|2===p|6===p&&(console.log(i),!1===b&&(f=Object(x.jsx)(ot,{list:i,onChange:function(){h(!0),lt().then((function(e){o(e),h(!1)}))}}))),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"wrapper",children:[Object(x.jsx)("div",{className:"top-row",children:f}),Object(x.jsxs)("div",{className:"grids",children:[Object(x.jsxs)("div",{className:"item top-cust",children:[Object(x.jsx)("h4",{class:"font-weight-light heading item",children:"Top Customers:"}),Object(x.jsx)(j.a,{idProperty:"Customer_Code",columns:[{name:"Web_List_Placement",header:"#",type:"number",defaultFlex:1},{name:"Customer_Name",header:"Customer",type:"string",defaultFlex:8}],dataSource:i,style:m,theme:"default-dark"})]}),Object(x.jsxs)("div",{className:"item top-supp",children:[Object(x.jsx)("h4",{class:"font-weight-light heading item",children:"Time for Support in the Last Month:"}),Object(x.jsx)(j.a,{idProperty:"CustomerCode",columns:[{name:"Customer_Name",header:"Customer",type:"string",defaultFlex:5},{name:"SupportTime",header:"Support (Mins)",type:"number",defaultFlex:1}],dataSource:a,style:m,theme:"default-dark"})]})]})]})})};a(898);var jt=a.p+"static/media/HQicon.9e6c548a.ico";function dt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(L.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){var t=e.setToken,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(""),o=Object(l.a)(i,2),u=o[0],j=o[1],d=function(){var e=Object(L.a)(F.a.mark((function e(a){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),a.preventDefault(),e.next=4,dt({username:c,password:u});case 4:"q>)*8n[TfhTyZAW"!==(n=e.sent).token?alert("Invalid Username/Password"):t(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){return fetch("/checkDueDate/",{method:"PUT",headers:{"Content-Type":"application/json"}})};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"login-logo",children:Object(x.jsx)("img",{src:jt,alt:"logo"})}),Object(x.jsxs)("div",{className:"login-wrapper",children:[Object(x.jsx)("h2",{children:"HQ Business - Log In"}),Object(x.jsxs)(D.a,{children:[Object(x.jsxs)(D.a.Group,{className:"mb-3",controlId:"emailInput",children:[Object(x.jsx)(D.a.Label,{children:"User:"}),Object(x.jsx)(D.a.Control,{type:"email",placeholder:"Enter username",onChange:function(e){return s(e.target.value)}})]}),Object(x.jsxs)(D.a.Group,{className:"mb-3",constrolId:"passwordInput",children:[Object(x.jsx)(D.a.Label,{children:"Password:"}),Object(x.jsx)(D.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return j(e.target.value)}})]}),Object(x.jsx)(S.a,{variant:"secondary",type:"submit",onClick:d,className:"button-to-the-right",children:"Submit"})]})]}),Object(x.jsx)(g,{})]})}a(899);var mt=function(){var e=function(){var e=Object(n.useState)(function(){var e=sessionStorage.getItem("token"),t=JSON.parse(e);return null===t||void 0===t?void 0:t.token}()),t=Object(l.a)(e,2),a=t[0],r=t[1];return{setToken:function(e){sessionStorage.setItem("token",JSON.stringify(e)),r(e.token)},token:a}}(),t=e.token,a=e.setToken;return t&&"q>)*8n[TfhTyZAW"!==t&&(alert("Invalid Log-in Token"),localStorage.removeItem("token")),t?Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(C,{}),Object(x.jsx)("div",{className:"main-wrapper",children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/",exact:!0,component:function(){return Object(x.jsx)(_e,{})}}),Object(x.jsx)(o.a,{path:"/Report1",exact:!0,component:function(){return Object(x.jsx)(Ze,{})}}),Object(x.jsx)(o.a,{path:"/Support",exact:!0,component:function(){return Object(x.jsx)(Ae,{})}}),Object(x.jsx)(o.a,{path:"/Products",exact:!0,component:function(){return Object(x.jsx)(st,{})}}),Object(x.jsx)(o.a,{path:"/Errors",exact:!0,component:function(){return Object(x.jsx)(nt,{})}}),Object(x.jsx)(o.a,{path:"/Customers",exact:!0,component:function(){return Object(x.jsx)(ut,{})}})]})}),Object(x.jsx)(g,{})]})}):Object(x.jsx)(ht,{setToken:a})},Ot=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,1289)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(mt,{})}),document.getElementById("root")),Ot()}},[[900,1,2]]]);
//# sourceMappingURL=main.64711ce5.chunk.js.map